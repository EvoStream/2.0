<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" html5">
<title>ERS Installation | EvoStream</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://50.56.172.81:4000feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#mysidebar").navgoco('toggle', true);

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks nav-inc-size">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> EvoStream</span></a>
            <div class="btn-group release-btn-grp" role="group">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Release Version
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li><a href="/1.7-test/index.html">1.7</a></li>
                    <li><a href="/2.0-test/index.html">2.0</a></li>
                </ul>
            </div>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="index.html">HOME</a></li>
                
                
                
                <li><a href="userguide_overview.html">USER GUIDE</a></li>
                
                
                
                <li><a href="api_overview.html">API GUIDE</a></li>
                
                
                
                <li><a href="html5players_ersoverview.html">HTML5 PLAYERS</a></li>
                
                
                
                <li><a href="emscloud_overview.html">EMS ON CLOUD</a></li>
                
                
                
                <li><a href="evowebservices_overview.html">EVOWEBSERVICES</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!-- Adding a Support Forum Link -->
                <li><a href="https://evostream.com/support-forum/" target="_blank">|&nbsp;&nbsp;Support Forum </a></li>
                <!--comment out this block if you want to hide search-->
                <li>
                    
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container fixed-fr">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          

















<!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                        <a href="/search.html" style="font-size: smaller; margin-left: 2px;"  >Advance Search</a>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="ERS Installation">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
<ul id="mysidebar" class="nav">

    <li class="sidebarTitle">HTML5 Players </li>
    
    
    
        
    
    <li>
        <a href="#">EvoStream Rendezvous Server (ERS)</a>
        <ul>
            
            
            
            <li><a href="html5players_ersoverview.html">ERS Overview</a></li>
            
            
            
            
            
            
            <li><a href="html5players_ersinstallation.html">ERS Installation</a></li>
            
            
            
            
            
            
            <li><a href="html5players_ersapi.html">ERS API</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">WebRTC</a>
        <ul>
            
            
            
            <li><a href="html5players_wrtcoverview.html">WebRTC Overview</a></li>
            
            
            
            
            
            
            <li><a href="html5players_wrtcdemo.html">Playing Videos Using WebRTC Demo Player</a></li>
            
            
            
            
            
            
            <li><a href="html5players_wrtccompatibility.html">Browser Compatibility</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">WebSocket</a>
        <ul>
            
            
            
            <li><a href="html5players_wsoverview.html">WebSockets Overview</a></li>
            
            
            
            
            
            
            <li><a href="html5players_wsmetadata.html">WebSockets Metadata</a></li>
            
            
            
            
            
            
            <li><a href="html5players_wsdemo.html">Playing Videos Using WebSocket Demo Player</a></li>
            
            
            
            
            
            
            <li><a href="html5players_wscompatibility.html">Browser Compatibility</a></li>
            
            
            
            
        </ul>
        
        
        
        <!--&lt;!&ndash; if you aren't using the accordion, uncomment this block:-->
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           <!--&ndash;&gt;-->
    </li>
   
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        

<a style="margin-top: 38px; margin-bottom: -20px;" target="_blank" href="https://github.com/pages/emscloud/html5players_ersinstall.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>



<div class="post-header">
   <h1 class="post-title-main">ERS Installation</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    

  <h3 id="pre-requisites">Pre-requisites</h3>

<ul>
  <li>
    <p><strong>STUN Server</strong></p>

    <p>STUN is a set of methods and network protocols to allow an end host to discover its public IP address even if it’s located behind a NAT. This server is used by ERS to allow both EMS and the client end-point (browser) to discover their respective IP addresses. Restund is the recommended open-source STUN/TURN server to be used with ERS.</p>

    <p>The default configuration of ERS already points to a public EvoStream STUN server. However, hosting your own STUN/TURN server is also possible as described below.</p>

    <p>To install and host restund on Linux, execute the following instructions:</p>

    <ol>
      <li>
        <p>Make sure that build-essential and unzip packages are already installed. On a debian-based Linux, these can be done through the following:</p>

        <div class="highlighter-rouge"><pre class="highlight"><code>apt-get install build-essential
apt-get install unzip
</code></pre>
        </div>
      </li>
      <li>
        <p>Download and install the toolkit library to be used by restund:</p>

        <div class="highlighter-rouge"><pre class="highlight"><code>wget http://www.creytiv.com/pub/re-0.4.12.tar.gz
tar -xzf re-0.4.12.tar.gz
cd re-0.4.12/
make
sudo make install
</code></pre>
        </div>
      </li>
      <li>
        <p>Download and install restund itself:</p>

        <div class="highlighter-rouge"><pre class="highlight"><code>wget https://github.com/otalk/restund/archive/master.zip
unzip master.zip
cd restund-master
make
sudo make install
sudo ldconfig
</code></pre>
        </div>
      </li>
      <li>
        <p>Configure restund (following is a basic sample config file):</p>

        <div class="highlighter-rouge"><pre class="highlight"><code>#
# restund.conf
#
# core
#
daemon no
debug yes
realm TestRealmThatCanBeChanged
syncinterval 600
udp_listen &lt;ip&gt;:&lt;port&gt;
udp_sockbuf_size 524288
tcp_listen &lt;ip&gt;:&lt;port&gt;
#
# modules (STUN messages are processed in module loading order)
#
module_path /usr/local/lib/restund/modules
module stat.so
module binding.so
module syslog.so
module status.so
#
# syslog
#
syslog_facility 24
</code></pre>
        </div>
      </li>
      <li>
        <p>Copy the updated configuration file:</p>

        <div class="highlighter-rouge"><pre class="highlight"><code>sudo cp restund.conf /etc/
</code></pre>
        </div>
      </li>
      <li>
        <p>Run restund:</p>

        <div class="highlighter-rouge"><pre class="highlight"><code>sudo restund /etc/restund.conf # add -d option for daemon
</code></pre>
        </div>
      </li>
    </ol>
  </li>
  <li>
    <p><strong>Node.JS</strong></p>

    <p>Node.js is a server side JavaScript runtime utilized to run ERS.</p>

    <p>For Linux/Unix variants, a helper script is available to automate the installation process. See Automatic section.</p>

    <p>For windows platforms and/or manual installation:</p>

    <p>Download and install or extract node.js from their <a href="https://nodejs.org/en/download/">website</a>.</p>

    <p>If extracted, add the Node.JS location to the environment path so that the corresponding binaries can be found even if packages are installed on different folder location.</p>
  </li>
  <li>
    <p><strong>NPM</strong></p>

    <p>The Node Package Manager allows easy installation of a Node.JS package and its dependencies. NPM will be used to install ERS. NPM is already part of the Node.JS application.</p>
  </li>
  <li>
    <p><strong>PM2</strong></p>

    <p>Although not necessarily a prerequisite, a Node.JS application/process manager can be installed, as well. This will manage the ERS process and restart it in case of failures and/or machine restart if configured. Currently PM2 is the recommended package for this task.</p>

    <p>This package is already automatically installed through the Linux/Unix helper script as described on Automatic section.</p>

    <p>To manually install PM2 package:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>npm install -g pm2
</code></pre>
    </div>
  </li>
</ul>

<h3 id="installation-procedure">Installation Procedure</h3>

<ul>
  <li>
    <p><strong>Manual Installation</strong></p>

    <p>Select a location where ERS will be installed and then change directory to that folder. Install ERS through the following command:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>npm install http://tarballs.evostream.com/ers/ers-&lt;version&gt;.tgz

</code></pre>
    </div>

    <p>Example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>npm install http://tarballs.evostream.com/ers/ers-1.0.0.tgz
</code></pre>
    </div>
  </li>
  <li>
    <p><strong>Automatic Installation</strong></p>

    <p>For Linux/Unix platforms, an easy to use script is provided to install Node.JS, PM2 and ERS automatically, and then start ERS using the PM2 node.js application manager.</p>

    <p>This script can be download from</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>http://tarballs.evostream.com/ers/ers-&lt;version&gt;-&lt;OS&gt;-&lt;arch&gt;.sh

</code></pre>
    </div>

    <p>Example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>http://tarballs.evostream.com/ers/ers-1.0.0-linux-x64.sh

</code></pre>
    </div>

    <p>Once downloaded, select the target installation directory, change to that folder, and run the script:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>sudo ./ers-&lt;version&gt;-&lt;OS&gt;-&lt;arch&gt;.sh
</code></pre>
    </div>
  </li>
</ul>

<h3 id="ers-configuration">ERS Configuration</h3>

<p>A <strong>default</strong> configuration file, <code class="highlighter-rouge">default.json</code> is included in the <code class="highlighter-rouge">config</code> folder where ERS was installed (e.g. <code class="highlighter-rouge">INSTALL_DIRECTORY/node_modules/ers/config/default.json</code>). This file can be modified to customize the settings of ERS.</p>

<p>Following is the content of the <code class="highlighter-rouge">default.json</code> config file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"server"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">3535</span><span class="p">,</span><span class="w">
    </span><span class="nt">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cert"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tokensEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"webServerEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"adminAccessEnabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"adminIP"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"adminPort"</span><span class="p">:</span><span class="w"> </span><span class="mi">3030</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"allowedrooms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"stunservers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
    </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stun:162.209.96.37:55555"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"turnservers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p><strong>Field Description</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><strong>Name</strong></th>
      <th style="text-align: center"><strong>Default Value</strong></th>
      <th><strong>Description</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">server</td>
      <td style="text-align: center"> </td>
      <td>Top level field containing all server related settings</td>
    </tr>
    <tr>
      <td style="text-align: center">port</td>
      <td style="text-align: center">3535</td>
      <td>Port number where ERS will listen to</td>
    </tr>
    <tr>
      <td style="text-align: center">secure</td>
      <td style="text-align: center">false</td>
      <td>Indicates if ERS will use HTTPS instead of regular HTTP</td>
    </tr>
    <tr>
      <td style="text-align: center">key</td>
      <td style="text-align: center">null</td>
      <td>Private Key file to be used for HTTPS</td>
    </tr>
    <tr>
      <td style="text-align: center">cert</td>
      <td style="text-align: center">null</td>
      <td>Certificate file to be used for HTTPS</td>
    </tr>
    <tr>
      <td style="text-align: center">password</td>
      <td style="text-align: center">null</td>
      <td>Password of the certificate file</td>
    </tr>
    <tr>
      <td style="text-align: center">tokensEnabled</td>
      <td style="text-align: center">false</td>
      <td>Indicates if tokens (a security mechanism) is enabled. This limits viewers who can access available streams of EMS</td>
    </tr>
    <tr>
      <td style="text-align: center">webServerEnabled</td>
      <td style="text-align: center">true</td>
      <td>Indicates if a web server will be instantiated that enables ERS to serve static files such as html pages containing the video player</td>
    </tr>
    <tr>
      <td style="text-align: center">adminAccessEnabled</td>
      <td style="text-align: center">true</td>
      <td>Indicates if admin access used to manage ERS is enabled</td>
    </tr>
    <tr>
      <td style="text-align: center">adminIP</td>
      <td style="text-align: center">127.0.0.1</td>
      <td>Allowed IP address that can connect to ERS as an admin. This needs to be adjusted to match the actual IP address of the machine used to access the admin APIs of ERS</td>
    </tr>
    <tr>
      <td style="text-align: center">adminPort</td>
      <td style="text-align: center">3030</td>
      <td>Port number where ERS admin access listens to</td>
    </tr>
    <tr>
      <td style="text-align: center">allowedrooms</td>
      <td style="text-align: center"> </td>
      <td>List of room names as strings that will only allowed to be created by ERS. Leave this empty to allow any rooms to be created. Or create one room for each running ems instance so that only intended rooms get created which also serves as an additional layer of security</td>
    </tr>
    <tr>
      <td style="text-align: center">stunservers</td>
      <td style="text-align: center"> </td>
      <td>List of STUN servers that ERS can use</td>
    </tr>
    <tr>
      <td style="text-align: center">turnservers</td>
      <td style="text-align: center"> </td>
      <td>List of TURN servers that ERS can use</td>
    </tr>
  </tbody>
</table>

<h3 id="starting-ers">Starting ERS</h3>

<ul>
  <li>
    <p><strong>Using Node</strong></p>

    <p>On the installation folder on ERS, change directory to the <code class="highlighter-rouge">node_modules/ers</code> folder and execute the following command:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>node ers.js
</code></pre>
    </div>

    <p>ERS will then launch with the following message:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>info: ERS running on port 3535...
info: Webserver port: 3535
info: Admin access port: 3030
</code></pre>
    </div>

    <p>To stop ERS, simply hit <strong>CTRL-C</strong>.</p>
  </li>
  <li>
    <p><strong>Using PM2</strong></p>

    <p>On the installation folder on ERS, change directory to the <code class="highlighter-rouge">node_modules/ers</code> folder and execute the following command:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>pm2 start ers.js
</code></pre>
    </div>

    <p>To stop ERS:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>pm2 stop ers
</code></pre>
    </div>
  </li>
</ul>



    <div class="tags">
        
    </div>

    

</div>




    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>
<footer>
    <div class="container">
            <div class="row row-footer">

            <div class="col-lg-4 copyright col-md-4 col-sm-5">
               <p><img src="images/width-200.png" alt="Company logo"/></p>
               &copy;2017 EvoStream Inc. All rights reserved. <br />

                </div> 
                <div class="col-lg-3 col-md-3 col-sm-3">
                    <h3 class="widget-title">
                        <span>ABOUT US</span>
                    </h3>

                    <div class="menu">
                    <ul>
                        <li class="fa fa-linkedin"><a href="">Linkedln</a></li>
                        <li class="fa fa-twitter"><a href="">Twitter</a></li>
                        <li class="fa fa-lock"><a href="">Privacy Policy</a></li>
                        <li class="fa fa-book"><a href="">Glossary</a></li>
                    </ul>
                    </div>
                </div>
                <div class="col-lg-5 col-md-5 col-sm-4">
                   <h3 class="widget-title">
                        <span>CONTACT US</span>
                    </h3>

                    <div class="menu">
                    <ul>
                        <li class="fa fa-envelope-o"><a>salesupport@evostream.com</a></li>
                        <li class="fa fa-phone"><a href="">+1 858-454-9393</a></li>
                        <li class="fa fa-map-marker"><a>1010 Turquoise Street, Suite 101, San Diego, CA 92109, USA</a></li>                        
                    </ul>
                    </div>
                </div>





               
            </div>
    </div>
</footer>
</body>

</html>